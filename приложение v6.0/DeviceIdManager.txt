// Новый файл: DeviceIdManager.java
package com.example.locationtracker;

import android.content.Context;
import android.content.SharedPreferences;

public class DeviceIdManager {
    private static final String PREFS_NAME = "device_prefs";
    private static final String KEY_DEVICE_ID = "device_id";
    private static String cachedDeviceId = null;

    public static String getDeviceId(Context context) {
        if (cachedDeviceId != null) {
            return cachedDeviceId;
        }

        SharedPreferences prefs = context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE);
        cachedDeviceId = prefs.getString(KEY_DEVICE_ID, null);

        if (cachedDeviceId == null) {
            cachedDeviceId = "SYS" + System.currentTimeMillis();
            prefs.edit().putString(KEY_DEVICE_ID, cachedDeviceId).apply();
        }

        return cachedDeviceId;
    }
}